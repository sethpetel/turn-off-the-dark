namespace SpriteKind {
    export const Monster = SpriteKind.create()
    export const FakeMonsters = SpriteKind.create()
    export const NormalThing = SpriteKind.create()
}
function turnOnTheDark () {
    setTilemap()
    for (let value of sprites.allOfKind(SpriteKind.NormalThing)) {
        value.setImage(sprites.readDataSprite(value, "night").image)
        value.follow(vivian, 15)
        value.setKind(SpriteKind.Monster)
    }
    darkIsOff = false
}
// for (let value of sprites.allOfKind(SpriteKind.Monster)) {
// if (Math.percentChance(70)) {
// tiles.placeOnRandomTile(value, myTiles.tile2)
// } else {
// tiles.placeOnRandomTile(value, myTiles.tile4)
// }
// }
function createAllMonsters () {
    for (let index = 0; index < 3; index++) {
        let myImage: Image = null
        makeDualityMonster(myImage, myImage)
    }
}
function setTilemap () {
    tiles.loadMap(tiles.createMap(tiles.createTilemap(hex`100008000202020202020202020202020202020202020102020201020201020202020202020202020202020202020202020202020201020201020202020202010202020202020202020202010202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202`, img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, [myTiles.transparency16,myTiles.tile1,myTiles.tile2], TileScale.Sixteen)))
    tiles.setTilemap(tiles.createTilemap(hex`1e000800020202020202020202020202020202020102020202010202020202020202020102020202010202020201020102020202020202020202020201020202020202020202020202020202020202020201020201020202010202020202010202010202020202010202020201020202020202020102020202010202020202020202020202020202020202020202020202020202020202020207050604040404040404040404040404040404040404040404040404040404030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303`, img`
        2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 
        2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 
        2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 
        2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 
        . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 
        `, [myTiles.transparency16,myTiles.tile1,myTiles.tile2,myTiles.tile4,myTiles.tile5,myTiles.tile3,myTiles.tile6,myTiles.tile7], TileScale.Sixteen))
}
// flashlight ON
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (batteryLife.value > 0) {
        vivian.setImage(img`
            . f f f f f f f f f f f f . . . 
            f f f . f f f f f d d f f f . . 
            f f . f f f f f d d d d f f . . 
            f f . f f f f d d d d d d d f . 
            . . . f f f d d d f d d d f f 5 
            . . . f f d d d d d d d d d 5 . 
            . . . . f d d d d d d d d 5 f . 
            . . . . f 2 2 2 2 2 2 2 5 2 f . 
            . . . . f 2 2 2 2 2 2 2 5 2 f . 
            . . . . f 2 d d 2 2 2 5 2 2 f . 
            . . . . f 2 d d 2 2 5 2 2 2 f . 
            . . . . f 2 2 d 8 4 2 2 2 2 f . 
            . . . . . f 8 d 8 4 5 5 5 5 5 5 
            . . . . . f f f 8 4 f f f f f . 
            . . . . . . f f f f 5 5 f . . . 
            . . . . . . f d d d f f 5 5 d . 
            `)
        turnOffTheDark()
    }
})
function redoTile (tileImage: Image) {
    copiedTile = tileImage.clone()
    copiedTile.replace(12, 13)
    copiedTile.replace(11, 1)
    copiedTile.replace(14, 4)
    tiles.coverAllTiles(tileImage, copiedTile)
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Monster, function (sprite, otherSprite) {
    game.reset()
})
statusbars.onZero(StatusBarKind.Health, function (status) {
    turnOnTheDark()
})
// flashlight OFF
controller.A.onEvent(ControllerButtonEvent.Released, function () {
    vivian.setImage(img`
        . f f f f f f f f f f f f . . . 
        f f f . f f f f f b b f f f . . 
        f f . f f f f f b b b b f f . . 
        f f . f f f f b b b b b b b f . 
        . . . f f f b b b f b b b f f . 
        . . . f f b b b b b b b b b f . 
        . . . . f b b b b b b b b b f . 
        . . . . f c c c c c c c c c f . 
        . . . . f c c c c c c c c c f . 
        . . . . f c b b c c c c c c f . 
        . . . . f c b b c c c c c c f . 
        . . . . f c c b 8 8 c c c c f . 
        . . . . . f 8 b 8 8 c c c c f . 
        . . . . . f f f 8 8 f f f f f . 
        . . . . . 6 f f f f f f f . . . 
        . . . . . . f b b b f f b b b . 
        `)
    turnOnTheDark()
})
scene.onOverlapTile(SpriteKind.Player, myTiles.tile7, function (sprite, location) {
    turnOffTheDark()
    tiles.placeOnRandomTile(sprite, myTiles.tile3)
    sprite.setImage(img`
        ....................
        ...................d
        ....fff............d
        ..fffddd...........d
        .ffdfddfd2222222fffd
        .ffdddddf2222222fffd
        .ffdfddfd2222222fffd
        .ffdfdddd2222222fffd
        .ffdddddd2222222fffd
        ..fdddddd22dddd2fffd
        ..ffdddd............
        ...ffff.............
        ....fff.............
        ....ff..............
        ....f...............
        ....................
        `)
    sprite.lifespan = 2000
    safeAndSound = true
    controller.moveSprite(sprite, 0, 0)
})
function turnOffTheDark () {
    for (let value2 of sprites.allOfKind(SpriteKind.Monster)) {
        value2.setImage(sprites.readDataSprite(value2, "day").image)
        value2.follow(null)
        value2.setKind(SpriteKind.NormalThing)
    }
    redoTile(myTiles.tile1)
    redoTile(myTiles.tile2)
    redoTile(myTiles.tile3)
    redoTile(myTiles.tile4)
    redoTile(myTiles.tile5)
    redoTile(myTiles.tile6)
    redoTile(myTiles.tile7)
    darkIsOff = true
}
function makeDualityMonster (night: Image, day: Image) {
    monster = sprites.create(night, SpriteKind.Monster)
    daytimeMonster = sprites.create(day, SpriteKind.FakeMonsters)
    nighttimeMonster = sprites.create(night, SpriteKind.FakeMonsters)
    daytimeMonster.setFlag(SpriteFlag.Invisible, true)
    nighttimeMonster.setFlag(SpriteFlag.Invisible, true)
    daytimeMonster.setFlag(SpriteFlag.Ghost, true)
    nighttimeMonster.setFlag(SpriteFlag.Ghost, true)
    sprites.setDataSprite(monster, "day", daytimeMonster)
    sprites.setDataSprite(monster, "night", nighttimeMonster)
    monster.follow(vivian, 15)
}
sprites.onDestroyed(SpriteKind.Player, function (sprite) {
    game.over(true)
})
let nighttimeMonster: Sprite = null
let daytimeMonster: Sprite = null
let monster: Sprite = null
let safeAndSound = false
let copiedTile: Image = null
let darkIsOff = false
let batteryLife: StatusBarSprite = null
let vivian: Sprite = null
scene.setBackgroundImage(img`
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888811111111111888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888881111111111111118888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888111111111bb1111111188888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888881111111111b1b111111118888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888811111111111bbb111bb1111888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    88888888888888888888888881111111111111bb11bbb1111188888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    88888888888888888888888881111111111111bbbbb1b1111188888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    88888888888888888888888811111111111111bb11bbb1111118888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    88888888888888888888888811111111111111b1111bb1111118888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    88888888888888888888888111111111111111b1111b11111111888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    88888888888888888888888111111111111111b111b1bb111111888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888811111bb11111111bbbbb11bb11111888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888811111bb11111b1111b11111b11111888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888811111bbbb111b1111b11111b11111888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    88888888888888888888888111111bb111111111bb11111b1111888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888811111111111111111b11b111bbb11888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    888888888888888888888881bb1111111111111b11b1bb1bbb11888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888811b1111111111111b1bb1b11bbb11888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888811111111111111bbbb1b1b11bb111888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    88888888888888888888888111111111bb111bbb11bbbbbb1111888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    88888888888888888888888811111111bb111bbbbb1111111118888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    888888888888888888888888111111111111111bbb1111111118888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888111111111111111111111111188888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888111b11111111111111111111188888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888811bb11111111b1111111111888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    88888888888888888888888888811111111111bb111111118888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888111111111111111111188888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888881111111111111118888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888811111111111888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
    `)
setTilemap()
vivian = sprites.create(img`
    . f f f f f f f f f f f f . . . 
    f f f . f f f f f b b f f f . . 
    f f . f f f f f b b b b f f . . 
    f f . f f f f b b b b b b b f . 
    . . . f f f b b b f b b b f f . 
    . . . f f b b b b b b b b b f . 
    . . . . f b b b b b b b b b f . 
    . . . . f c c c c c c c c c f . 
    . . . . f c c c c c c c c c f . 
    . . . . f c b b c c c c c c f . 
    . . . . f c b b c c c c c c f . 
    . . . . f c c b 8 8 c c c c f . 
    . . . . . f 8 b 8 8 c c c c f . 
    . . . . . f f f 8 8 f f f f f . 
    . . . . . 6 f f f f f f f . . . 
    . . . . . . f b b b f f b b b . 
    `, SpriteKind.Player)
controller.moveSprite(vivian, 80, 60)
tiles.placeOnRandomTile(vivian, myTiles.tile3)
scene.cameraFollowSprite(vivian)
createAllMonsters()
batteryLife = statusbars.create(20, 4, StatusBarKind.Health)
batteryLife.attachToSprite(vivian)
batteryLife.setColor(6, 15)
game.onUpdate(function () {
    if (darkIsOff && !(safeAndSound)) {
        batteryLife.value += -1
    }
})
